const{floor:e,random:t}=Math,n=document.querySelector.bind(document),o=document.querySelectorAll.bind(document),i=(e,t)=>{let n=null;return function(){const o=()=>e.apply(this,arguments);clearTimeout(n),n=setTimeout(o,t)}},{log:a}=console,{atan2:s,PI:r}=Math;class l{constructor(e){a("👁");const t=this;Object.assign(t.config={},{el:null,svg:null,eye:null},e),t.mouse=t.config.svg.createSVGPoint(),t.centerX=null,t.centerY=null,t._updateDynamics()._bindEvents()}_bindEvents(){const e=this;return e._handleMouseMove=e._handleMouseMove.bind(e),e.config.el.addEventListener("mousemove",e._handleMouseMove),e._handleWindowResize=e._handleWindowResize.bind(e),window.addEventListener("resize",i(e._handleWindowResize,500)),e}_updateDynamics(){const e=this,{width:t,x:n,y:o}=e.config.eye.getBBox();return e.centerX=n+t/2,e.centerY=o+t/2,e}_handleMouseMove(e){const t=this;t.mouse.x=e.clientX,t.mouse.y=e.clientY;const n=t.mouse.matrixTransform(t.config.svg.getScreenCTM().inverse()),o=n.x-t.centerX,i=n.y-t.centerY,a=180*s(i,o)/r+360;t.config.eye.style.transform=`rotate(${a}deg)`}_handleWindowResize(){this._updateDynamics()}}const{log:d}=console;const c={};c.body=document.body,c.pageTopWave=n(".page-top-wave"),c.projectsHandler=new class{constructor(e){d("🎬");const t=this;Object.assign(t.config={},{el:document.createElement("div"),links:null},e),t.config.links&&(t.events={},t.eyes=[],t._isActive=!1,t._demoWrapper=n(".iframe-wrapper"),t._iframe=t._demoWrapper.querySelector("iframe"),t._demoCloseButton=n(".iframe-close-button"),t._iframeLoader=n(".iframe-loader"),t._iframeLoaderSecLayer=n(".iframe-loader > div:nth-child(1)"),t._iframeLoaderMainLayer=n(".iframe-loader > div:nth-child(2)"),t._iframeLoadingText=n(".iframe-loading-text"),t._iframeLoadingTextTitle=n(".iframe-loading-text .title"),t._iframeLoadingTextDescription=n(".iframe-loading-text .description"),t._previousFocusedElement=null)}get element(){return this.config.el}run(){return this._bindEvents(),this}_bindEvents(){const e=this;return e.events.projectShow=new CustomEvent("projectShow"),e.events.projectHide=new CustomEvent("projectHide"),e.config.links.forEach((t=>{let n=t.querySelector("svg > g.eye");n&&e.eyes.push(new l({el:t,svg:n.parentElement,eye:n}))})),e._handleLinkClick=e._handleLinkClick.bind(e),e._handleCloseIframe=e._handleCloseIframe.bind(e),e._handleKeyUp=e._handleKeyUp.bind(e),e.config.links.forEach((t=>t.addEventListener("click",e._handleLinkClick))),e._demoCloseButton.addEventListener("click",e._handleCloseIframe),document.addEventListener("keyup",e._handleKeyUp),e}_handleLinkClick(e){e.preventDefault();const t=this,n=e.currentTarget,o=n.href,i=n.dataset.title,a=n.dataset.description;t.element.dispatchEvent(t.events.projectShow),t._previousFocusedElement=document.activeElement,t._iframeLoadingTextTitle.innerHTML=i,t._iframeLoadingTextDescription.innerHTML=a,t._iframeLoader.classList.add("-show"),t._demoCloseButton.focus(),t._iframeLoaderMainLayer.addEventListener("transitionend",(()=>{t._iframeLoadingText.style.opacity=1,t._demoWrapper.style.opacity=0,t._demoWrapper.style.display="block",t._iframe.src=o,t._iframe.addEventListener("load",(()=>{t._isActive=!0,t._iframeLoadingText.style.opacity=0,t._iframeLoader.classList.add("-hide"),t._demoWrapper.style.opacity=1,t._iframeLoaderSecLayer.addEventListener("transitionend",(()=>{t._demoWrapper.classList.add("-loaded")}),{once:!0})}),{once:!0})}),{once:!0})}_handleKeyUp(e){e=e||window.event,!1!==this._isActive&&27==e.keyCode&&this._handleCloseIframe()}_handleCloseIframe(){const e=this;e._isActive=!1,e._iframeLoader.classList.remove("-hide"),e._iframeLoaderMainLayer.addEventListener("transitionend",(()=>{e._iframeLoader.classList.remove("-show"),e._demoWrapper.style.opacity=0,e._demoWrapper.style.display="none",e._demoWrapper.classList.remove("-loaded"),e._iframeLoaderMainLayer.addEventListener("transitionend",(()=>{e._iframe.src="",e.element.dispatchEvent(e.events.projectHide),e._previousFocusedElement&&e._previousFocusedElement.focus()}),{once:!0})}),{once:!0})}}({links:o('.demos a:not([target="_blank"]), .oss a:not([target="_blank"])')}).run(),c.lastKnownScrollPosition=0,c.onScrollTicking=!1,c.scrollHandler=()=>{c.lastKnownScrollPosition=window.scrollY,c.onScrollTicking||(window.requestAnimationFrame((()=>{c.handleScrollUpdate(c.lastKnownScrollPosition),c.onScrollTicking=!1})),c.onScrollTicking=!0)},c.handleScrollUpdate=e=>{e>20?c.pageTopWave.classList.add("-pause"):c.pageTopWave.classList.remove("-pause")},c.projectsHandler.element.addEventListener("projectShow",(()=>{c.body.classList.add("-prevent-scrolling"),c.pageTopWave.classList.add("-pause")})),c.projectsHandler.element.addEventListener("projectHide",(()=>{c.body.classList.remove("-prevent-scrolling"),c.pageTopWave.classList.remove("-pause")})),window.addEventListener("scroll",c.scrollHandler),document.documentElement.style.setProperty("--scrollbar-width",`${(()=>{const e=document.createElement("div");let t=0;return e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t})()}px`);
//# sourceMappingURL=index.61ed869f.js.map
