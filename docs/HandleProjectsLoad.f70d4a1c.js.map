{"mappings":"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","sources":["src/public/js/lib/HandleProjectsLoad.js","src/public/js/lib/FollowingEye/index.js"],"sourcesContent":["const { log } = console;\n\nimport FollowingEye from './FollowingEye';\nimport { $ } from './utils';\n\nconst internals = {\n  eye: new FollowingEye().render($('[data-bind-eye=\"true\"]')).update()\n};\n\nexport default class HandleProjectsLoad {\n    constructor(config) {\n        log('ðŸŽ¬');\n\n        const that = this;\n\n        Object.assign(that.config = {}, {\n            el: document.createElement('div'),\n            links: null\n        }, config);\n\n        if (!that.config.links) return;\n\n        that.events = {};\n        that._isActive = false;\n        that._demoWrapper = $('.iframe-wrapper');\n        that._iframe = that._demoWrapper.querySelector('iframe');\n        that._demoCloseButton = $('.iframe-close-button');\n        that._iframeLoader = $('.iframe-loader');\n        that._iframeLoaderSecLayer = $('.iframe-loader > div:nth-child(1)');\n        that._iframeLoaderMainLayer = $('.iframe-loader > div:nth-child(2)');\n        that._iframeLoadingText = $('.iframe-loading-text');\n        that._iframeLoadingTextTitle = $('.iframe-loading-text .title');\n        that._iframeLoadingTextDescription = $('.iframe-loading-text .description');\n        that._previousFocusedElement = null;\n    }\n\n    get element() {\n        return this.config.el;\n    }\n\n    run() {\n        const that = this;\n\n        that._bindEvents();\n        that._iframeLoader.classList.add('-ready');\n\n        return that;\n    }\n\n    _bindEvents() {\n        const that = this;\n\n        that.events.projectShow = new CustomEvent('projectShow');\n        that.events.projectHide = new CustomEvent('projectHide');\n\n        that._handleLinkClick = that._handleLinkClick.bind(that);\n        that._handleCloseIframe = that._handleCloseIframe.bind(that);\n        that._handleKeyUp = that._handleKeyUp.bind(that);\n\n        that.config.links.forEach(l => {\n          l.addEventListener('click', that._handleLinkClick);\n\n          if (l.dataset.bindEye === 'true') {\n            l.addEventListener('mouseenter', (ev) => {\n              internals.eye.render(ev.currentTarget);\n            });\n          }\n        });\n        that._demoCloseButton.addEventListener('click', that._handleCloseIframe);\n        document.addEventListener('keyup', that._handleKeyUp);\n\n        return that;\n    }\n\n    _handleLinkClick(ev) {\n        ev.preventDefault();\n\n        const that = this;\n        const target = ev.currentTarget;\n        const iframeUrl = target.href;\n        const projectName = target.dataset.title;\n        const projectDescription = target.dataset.description;\n\n        that.element.dispatchEvent(that.events.projectShow);\n        that._previousFocusedElement = document.activeElement;\n        that._iframeLoadingTextTitle.innerHTML = projectName;\n        that._iframeLoadingTextDescription.innerHTML = projectDescription;\n        that._iframeLoader.classList.add('-show');\n\n        that._demoCloseButton.focus();\n\n        that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n            that._iframeLoadingText.style.opacity = 1;\n\n            that._demoWrapper.style.opacity = 0;\n            that._demoWrapper.style.display = 'block';\n            that._iframe.src = iframeUrl;\n\n            that._iframe.addEventListener('load', () => {\n                that._isActive = true;\n\n                that._iframeLoadingText.style.opacity = 0;\n                that._iframeLoader.classList.add('-hide');\n                that._demoWrapper.style.opacity = 1;\n\n                that._iframeLoaderSecLayer.addEventListener('transitionend', () => {\n                    that._demoWrapper.classList.add('-loaded');\n                }, { once: true });\n            }, { once: true });\n        }, { once: true });\n    }\n\n    _handleKeyUp(ev) {\n        const that = this;\n\n        ev = (ev || window.event);\n\n        if (that._isActive === false) {\n            return;\n        }\n\n        if (ev.keyCode == 27) {\n            that._handleCloseIframe();\n        }\n    }\n\n    _handleCloseIframe() {\n        const that = this;\n\n        that._isActive = false;\n        that._iframeLoader.classList.remove('-hide');\n\n        that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n            that._iframeLoader.classList.remove('-show');\n\n            that._demoWrapper.style.opacity = 0;\n            that._demoWrapper.style.display = 'none';\n            that._demoWrapper.classList.remove('-loaded');\n\n            that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n                that._iframe.src = '';\n                that.element.dispatchEvent(that.events.projectHide);\n\n                if (that._previousFocusedElement) {\n                    that._previousFocusedElement.focus();\n                }\n            }, { once: true });\n        }, { once: true });\n    }\n}\n","import { createElementFromString, debounce } from '../utils';\nimport './style.css';\n\n/**\n * Main logic taken from Blake Bowenâ€™s pen\n * https://codepen.io/osublake/pen/jzNgqY\n */\nexport default class FollowingEye {\n  #template = `\n    <svg class=\"FollowingEye\" viewBox=\"0 0 100 100\" width=\"100%\" height=\"100%\">\n      <g class=\"FollowingEye-group\">\n        <circle class=\"FollowingEye-outline\" stroke-width=\"6\" cx=\"50\" cy=\"50\" r=\"46\"/>\n        <circle class=\"FollowingEye-inner\" cx=\"76\" cy=\"50\" r=\"20\"/>\n      </g>\n    </svg>\n  `;\n\n  #centerX = null;\n\n  #centerY = null;\n\n  #point = null\n\n  #eye = null\n\n  constructor() {\n    this.element = createElementFromString(this.#template);\n    this.#point = this.element.createSVGPoint();\n    this.#eye = this.element.querySelector('.FollowingEye-group');\n\n    this.#bindEvents();\n  }\n\n  render(element, position = 'beforeend') {\n    element.insertAdjacentElement(position, this.element);\n\n    return this;\n  }\n\n  update() {\n    const { width, x, y } = this.#eye.getBBox();\n\n    this.#centerX = x + (width / 2);\n    this.#centerY = y + (width / 2);\n\n    return this;\n  }\n\n  mouseMoveHandler(ev) {\n    this.#update(this.#getCoordinates(ev));\n  }\n\n  resizeWindowHandler() {\n    this.update();\n  }\n\n  #update({ x, y }) {\n    const theta = Math.atan2(y - this.#centerY, x - this.#centerX);\n    const angle = (theta * 180 / Math.PI) + 360;\n\n    this.#eye.style.transform = `rotate(${angle}deg)`;\n  }\n\n  #getCoordinates(ev) {\n    this.#point.x = ev.clientX;\n    this.#point.y = ev.clientY;\n\n    return this.#point.matrixTransform(this.element.getScreenCTM().inverse());\n  }\n\n  #bindEvents() {\n    this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    this.resizeWindowHandler = this.resizeWindowHandler.bind(this);\n\n    window.addEventListener('mousemove', this.mouseMoveHandler);\n    window.addEventListener('resize', debounce(this.resizeWindowHandler, 500));\n\n    return this;\n  }\n}\n"],"names":["$fSA2j","parcelRequire","log","$895e4461594157d4$var$log","console","$895e4461594157d4$var$internals","eye","default","render","$9xPB6","$","update","$895e4461594157d4$export$2e2bcd8739ae039","constructor","config","that","this","Object","assign","el","document","createElement","links","events","_isActive","_demoWrapper","_iframe","querySelector","_demoCloseButton","_iframeLoader","_iframeLoaderSecLayer","_iframeLoaderMainLayer","_iframeLoadingText","_iframeLoadingTextTitle","_iframeLoadingTextDescription","_previousFocusedElement","element","run","_bindEvents","classList","add","projectShow","CustomEvent","projectHide","_handleLinkClick","bind","_handleCloseIframe","_handleKeyUp","forEach","l","addEventListener","dataset","bindEye","ev","currentTarget","preventDefault","target","iframeUrl","href","projectName","title","projectDescription","description","dispatchEvent","activeElement","innerHTML","focus","style","opacity","display","src","once","window","event","keyCode","remove","$b8f7da3406808d0c$export$2e2bcd8739ae039","template","centerX","centerY","point","createElementFromString","createSVGPoint","bindEvents","position","insertAdjacentElement","width","x","y","getBBox","mouseMoveHandler","getCoordinates","resizeWindowHandler","angle","Math","atan2","PI","transform","clientX","clientY","matrixTransform","getScreenCTM","inverse","debounce"],"version":3,"file":"HandleProjectsLoad.f70d4a1c.js.map"}