{"mappings":"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","sources":["src/public/js/lib/HandleProjectsLoad.js","src/public/js/lib/FollowingEye.js"],"sourcesContent":["const { log } = console;\n\nimport FollowingEye from './FollowingEye';\nimport { $ } from './utils';\n\nexport default class HandleProjectsLoad {\n    constructor(config) {\n        log('üé¨');\n\n        const that = this;\n\n        Object.assign(that.config = {}, {\n            el: document.createElement('div'),\n            links: null\n        }, config);\n\n        if (!that.config.links) return;\n\n        that.events = {};\n        that.eyes = [];\n        that._isActive = false;\n        that._demoWrapper = $('.iframe-wrapper');\n        that._iframe = that._demoWrapper.querySelector('iframe');\n        that._demoCloseButton = $('.iframe-close-button');\n        that._iframeLoader = $('.iframe-loader');\n        that._iframeLoaderSecLayer = $('.iframe-loader > div:nth-child(1)');\n        that._iframeLoaderMainLayer = $('.iframe-loader > div:nth-child(2)');\n        that._iframeLoadingText = $('.iframe-loading-text');\n        that._iframeLoadingTextTitle = $('.iframe-loading-text .title');\n        that._iframeLoadingTextDescription = $('.iframe-loading-text .description');\n        that._previousFocusedElement = null;\n    }\n\n    get element() {\n        return this.config.el;\n    }\n\n    run() {\n        const that = this;\n\n        that._bindEvents();\n        that._iframeLoader.classList.add('-ready');\n\n        return that;\n    }\n\n    _bindEvents() {\n        const that = this;\n\n        that.events.projectShow = new CustomEvent('projectShow');\n        that.events.projectHide = new CustomEvent('projectHide');\n\n        that.config.links.forEach(link => {\n            let svgEye = link.querySelector('svg > g.eye');\n\n            if (!svgEye) return;\n\n            that.eyes.push(new FollowingEye({\n                el: link,\n                svg: svgEye.parentElement,\n                eye: svgEye\n            }));\n        });\n\n        that._handleLinkClick = that._handleLinkClick.bind(that);\n        that._handleCloseIframe = that._handleCloseIframe.bind(that);\n        that._handleKeyUp = that._handleKeyUp.bind(that);\n\n        that.config.links.forEach(l => l.addEventListener('click', that._handleLinkClick));\n        that._demoCloseButton.addEventListener('click', that._handleCloseIframe);\n        document.addEventListener('keyup', that._handleKeyUp);\n\n        return that;\n    }\n\n    _handleLinkClick(ev) {\n        ev.preventDefault();\n\n        const that = this;\n        const target = ev.currentTarget;\n        const iframeUrl = target.href;\n        const projectName = target.dataset.title;\n        const projectDescription = target.dataset.description;\n\n        that.element.dispatchEvent(that.events.projectShow);\n        that._previousFocusedElement = document.activeElement;\n        that._iframeLoadingTextTitle.innerHTML = projectName;\n        that._iframeLoadingTextDescription.innerHTML = projectDescription;\n        that._iframeLoader.classList.add('-show');\n\n        that._demoCloseButton.focus();\n\n        that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n            that._iframeLoadingText.style.opacity = 1;\n\n            that._demoWrapper.style.opacity = 0;\n            that._demoWrapper.style.display = 'block';\n            that._iframe.src = iframeUrl;\n\n            that._iframe.addEventListener('load', () => {\n                that._isActive = true;\n\n                that._iframeLoadingText.style.opacity = 0;\n                that._iframeLoader.classList.add('-hide');\n                that._demoWrapper.style.opacity = 1;\n\n                that._iframeLoaderSecLayer.addEventListener('transitionend', () => {\n                    that._demoWrapper.classList.add('-loaded');\n                }, { once: true });\n            }, { once: true });\n        }, { once: true });\n    }\n\n    _handleKeyUp(ev) {\n        const that = this;\n\n        ev = (ev || window.event);\n\n        if (that._isActive === false) {\n            return;\n        }\n\n        if (ev.keyCode == 27) {\n            that._handleCloseIframe();\n        }\n    }\n\n    _handleCloseIframe() {\n        const that = this;\n\n        that._isActive = false;\n        that._iframeLoader.classList.remove('-hide');\n\n        that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n            that._iframeLoader.classList.remove('-show');\n\n            that._demoWrapper.style.opacity = 0;\n            that._demoWrapper.style.display = 'none';\n            that._demoWrapper.classList.remove('-loaded');\n\n            that._iframeLoaderMainLayer.addEventListener('transitionend', () => {\n                that._iframe.src = '';\n                that.element.dispatchEvent(that.events.projectHide);\n\n                if (that._previousFocusedElement) {\n                    that._previousFocusedElement.focus();\n                }\n            }, { once: true });\n        }, { once: true });\n    }\n}\n","const { log } = console;\nconst { atan2, PI } = Math;\n\nimport { debounce } from './utils';\n\n/**\n * Man logic taken from Blake Bowen‚Äôs pen\n * https://codepen.io/osublake/pen/jzNgqY\n */\nexport default class FollowingEye {\n    constructor(config) {\n        log('üëÅ');\n\n        const that = this;\n\n        Object.assign(that.config = {}, {\n            el: null,\n            svg: null,\n            eye: null\n        }, config);\n\n        that.mouse = that.config.svg.createSVGPoint();\n        that.centerX = null;\n        that.centerY = null;\n\n        that._updateDynamics()._bindEvents();\n    }\n\n    _bindEvents() {\n        const that = this;\n\n        that._handleMouseMove = that._handleMouseMove.bind(that);\n        that.config.el.addEventListener('mousemove', that._handleMouseMove);\n\n        that._handleWindowResize = that._handleWindowResize.bind(that);\n        window.addEventListener('resize', debounce(that._handleWindowResize, 500));\n        return that;\n    }\n\n    _updateDynamics() {\n        const that = this;\n        const { width, x, y } = that.config.eye.getBBox();\n\n        that.centerX = x + (width / 2);\n        that.centerY = y + (width / 2);\n\n        return that;\n    }\n\n    _handleMouseMove(ev) {\n        const that = this;\n\n        that.mouse.x = ev.clientX;\n        that.mouse.y = ev.clientY;\n\n        const point = that.mouse.matrixTransform(that.config.svg.getScreenCTM().inverse());\n        const dx = point.x - that.centerX;\n        const dy = point.y - that.centerY;\n        const theta = atan2(dy, dx);\n        const angle = (theta * 180 / PI) + 360;\n\n        that.config.eye.style.transform = `rotate(${angle}deg)`;\n    }\n\n    _handleWindowResize() {\n        this._updateDynamics();\n    }\n}\n"],"names":["$4JKO5","parcelRequire","log","$895e4461594157d4$var$log","console","$895e4461594157d4$export$2e2bcd8739ae039","constructor","config","that","this","Object","assign","el","document","createElement","links","events","eyes","_isActive","_demoWrapper","$9xPB6","$","_iframe","querySelector","_demoCloseButton","_iframeLoader","_iframeLoaderSecLayer","_iframeLoaderMainLayer","_iframeLoadingText","_iframeLoadingTextTitle","_iframeLoadingTextDescription","_previousFocusedElement","element","run","_bindEvents","classList","add","projectShow","CustomEvent","projectHide","forEach","link","svgEye","push","default","svg","parentElement","eye","_handleLinkClick","bind","_handleCloseIframe","_handleKeyUp","l","addEventListener","ev","preventDefault","target","currentTarget","iframeUrl","href","projectName","dataset","title","projectDescription","description","dispatchEvent","activeElement","innerHTML","focus","style","opacity","display","src","once","window","event","keyCode","remove","$372fac47f8b94046$var$log","atan2","$372fac47f8b94046$var$atan2","PI","$372fac47f8b94046$var$PI","Math","$372fac47f8b94046$export$2e2bcd8739ae039","mouse","createSVGPoint","centerX","centerY","_updateDynamics","_handleMouseMove","_handleWindowResize","debounce","width","x","y","getBBox","clientX","clientY","point","matrixTransform","getScreenCTM","inverse","dx","dy","angle","transform"],"version":3,"file":"HandleProjectsLoad.489a607a.js.map"}